{
    "name": "surge",
    "fork": {
        "key": {
            "_gen": "loadJsonFile",
            "file": "/home/zones/surge-zones.json"
        }
    },
    "varsOnce": {
        "startingTime": {
            "_gen": "now"
        },
        "steadyStateMean": {
            "_gen": "uniformDistribution",
            "bounds": [15000, 35000]
        }
    },
    "vars": {
        "email": {
            "_gen": "string",
            "expr": "#{Internet.emailAddress}"
        },
        "steadyStateThrottle": {
            "_gen": "weightedOneOf",
            "choices": [
                {
                    "weight": 4,
                    "value": {
                        "_gen": "normalDistribution",
                        "mean": {
                            "_gen": "var",
                            "var": "steadyStateMean"
                        },
                        "sd": 10000,
                        "clamp": [1000, 50000],
                        "decimals": 0
                    }
                },
                {
                    "weight": 1,
                    "value": {
                        "_gen": "uniformDistribution",
                        "bounds": [2000, 3500],
                        "decimals": 0
                    }
                }
            ]
        },
        "delta": {
            "_gen": "customFunction",
            "language": "python",
            "file": "/home/functions/advance_time.py",
            "function": "advance_time",
            "args": {
                "startingTime": {
                    "_gen": "var",
                    "var": "startingTime"
                },
                "now": {
                    "_gen": "math",
                    "expr": "timestamp + offset",
                    "names": {
                        "timestamp": {
                            "_gen": "now"
                        },
                        "offset": {
                            "_gen": "constant",
                            "x": 0
                        }
                    }
                },
                "historicalDelta": {
                    "_gen": "normalDistribution",
                    "mean": 5000,
                    "sd": 500
                },
                "realtimeDelta": {
                    "_gen": "normalDistribution",
                    "mean": 5000,
                    "sd": 500
                }
                }
            }
        }
    },
    "key": {
        "key": {
            "string": {
                "_gen": "var",
                "var": "email"
            }
        }
    },
    "value": {
        "request_id": {
            "_gen": "sequentialString",
            "startingFrom": 2000000,
            "expr": "REQ-~d"
        },
        "customer_email": {
            "_gen": "var",
            "var": "email"
        },
        "pickup_zone": {
            "_gen": "var",
            "var": "forkKey"
        },
        "drop_off_zone": {
            "_gen": "oneOf",
            "choices": {
                "_gen": "loadJsonFile",
                "file": "/home/zones/all-zones.json"
            }
        },
        "price": {
            "_gen": "uniformDistribution",
            "bounds": [50, 150],
            "decimals": 2
        },
        "number_of_passengers": {
            "_gen": "uniformDistribution",
            "bounds": [1, 5],
            "decimals": 0
        },
        "request_ts": {
            "_gen": "var",
            "var": "delta",
            "path": ["ts"]
        }
    },
    "localConfigs": {
        "throttleMs": {
            "_gen": "var",
            "var": "delta",
            "path": ["throttle"]
        }
    }
}
